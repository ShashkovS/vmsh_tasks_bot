"use strict";

const CELL_SIZE_IN_REM = 3;
const MODAL_WIDTH_IN_CELLS = 5;
const MODAL_HEIGHT_IN_CELLS = 3;
const FOG_OF_WAR = 15;
const FOR_OPACITY_LEN = 12;

const DEBUG = false;

const mapAsString = `
x\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx
x\to\to\to\t1\t1\t2\t6\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx\t1\t1\t1\t1\tx\t1\t1\t4\t1\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t5\t3\tx\t3\t5\t10\tx
x\to\to\to\t1\t1\t2\tx\tx\tx\tx\tx\tx\tx\t4\tx\t4\t4\tx\t1\t3\t3\t1\tx\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t4\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t3\tx\t1\t3\t5\tx
x\to\to\to\t1\t1\t2\tx\t1\t1\t1\tx\t4\tx\t8\tx\t1\t1\tx\t1\t1\t1\t1\t4\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t4\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t3\tx\t1\t1\t3\tx
x\t1\t1\t1\t1\t1\t2\t3\t1\t4\t1\t4\t1\tx\tx\tx\t1\t1\tx\tx\tx\tx\tx\tx\t3\t3\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t3\tx\t1\t1\t1\tx
x\t2\t2\t2\t2\t2\t2\tx\t4\tx\t1\t1\t1\t1\t1\t1\t1\t1\t4\t1\t1\t1\t1\t1\t1\t1\tx\t2\t1\t2\t1\t2\t1\t2\t1\tx\tx\tx\tx\t7\tx\tx\tx\tx\tx\tx\t3\tx\t6\tx\tx\tx
x\t5\tx\tx\tx\t4\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\t1\t1\t4\t1\t1\t1\t1\t1\t1\t1\tx\t1\t2\t1\t2\t1\t2\t1\t2\t5\t1\t1\t1\t1\t1\t1\tx\t2\t2\tx\t1\t2\t1\t2\t1\tx
x\t1\t1\t1\tx\t1\t1\t1\t2\t2\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t2\t1\t2\t1\t2\t1\t2\t1\tx\t1\t1\t1\t1\t1\t1\tx\t2\t2\tx\t2\t1\t2\t1\t2\tx
x\t1\t3\t1\tx\t1\t1\t1\t2\t2\tx\t8\t6\t3\t1\t1\t1\t3\t1\t1\t1\t3\t1\t1\t1\t3\tx\t1\t2\t1\t2\t1\t2\t1\t2\tx\t1\t1\t1\t1\t1\t1\tx\t2\t2\tx\t1\t2\t1\t2\t1\tx
x\t1\t3\t1\tx\t1\t1\t1\t2\t2\tx\t6\t3\t1\t3\t1\t3\t1\t3\t1\t3\t1\t3\t1\t3\t1\t4\t2\t1\t2\t1\t2\t1\t2\t1\tx\t1\t1\t1\t1\t1\t1\tx\t2\t2\tx\t2\t1\t2\t1\t2\tx
x\t1\t1\t1\tx\t1\t1\t1\t2\t2\tx\t3\t1\t1\t1\t3\t1\t1\t1\t3\t1\t1\t1\t3\t1\t1\t4\t1\t2\t1\t2\t1\t2\t1\t2\tx\t1\t1\t1\t1\t1\t1\tx\t2\t2\tx\tx\tx\tx\tx\tx\tx
x\tx\tx\tx\tx\t5\tx\tx\tx\tx\tx\tx\t6\t6\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\t1\tx\tx\t6\tx\t4\t4\t4\tx\t9\tx
x\t1\t1\t1\tx\t1\tx\t2\t2\t2\t2\t2\t2\t2\tx\t3\t2\t3\tx\t1\t1\t1\t1\t5\t2\t5\t1\t1\t1\t1\tx\t3\t3\t3\t9\tx\t1\t1\t1\t1\t1\t1\t3\t3\t3\t3\t3\tx\t5\t5\t5\tx
x\t1\t3\t1\tx\t1\tx\t2\t2\t2\t2\t2\t2\t2\tx\t2\t3\t2\tx\t1\t3\t3\t1\tx\t2\tx\t1\t3\t3\t1\tx\t5\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx
x\t1\t3\t1\tx\t1\tx\t6\t6\tx\tx\tx\tx\tx\tx\t3\t2\t3\tx\t1\t1\t1\t1\tx\t2\tx\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t6\t1\t1\tx\t1\t2\t1\t2\t1\t2\t1\t2\t1\tx
x\t1\t1\t1\tx\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\tx\tx\tx\tx\tx\t6\tx\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\tx\t2\t4\t5\t1\t2\t4\t5\t1\t2\tx
x\t1\t3\t1\tx\t1\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t6\tx\t1\t1\t1\t1\t1\t1\t4\t2\t2\t4\t4\tx\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\tx\t1\t5\t4\t2\t1\t5\t4\t2\t1\tx
x\t1\t3\t1\tx\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t2\t6\t1\t1\t1\t1\t1\t1\t4\t2\t2\t4\t8\tx\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\tx\t2\t4\t5\t1\t2\t4\t5\t1\t2\tx
x\t1\t1\t1\t5\t1\t5\t1\t3\t1\t3\t1\t3\t1\t3\t1\tx\t6\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\t1\tx\t1\t5\t4\t2\t1\t5\t4\t2\t1\tx
x\tx\tx\tx\tx\t6\tx\t1\t3\t1\t3\t1\t3\t1\t3\t1\tx\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t4\t1\t1\t1\t1\t1\t1\t1\tx\t2\t1\t2\t1\t2\t1\t2\t1\t2\tx
x\t1\t1\t1\tx\t2\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t2\tx\t1\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\tx\tx\tx\tx\t7\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t4\t4\tx
x\t1\t3\t1\tx\t2\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\tx\t1\tx\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx\t1\tx\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx
x\t1\t3\t1\t6\t2\t6\t2\t1\t2\t1\t2\t1\t2\t1\t2\t1\t2\tx\t1\tx\t2\tx\tx\tx\tx\tx\tx\tx\tx\t2\tx\t1\tx\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx
x\t1\t1\t1\t6\t2\t6\t1\t2\t1\t2\t1\t2\t1\t2\t1\t2\t1\tx\t1\tx\t2\tx\t3\t3\t3\t3\t3\t3\t6\t2\tx\t1\tx\t2\t2\tx\t2\t2\tx\tx\tx\tx\tx\t2\tx\tx\tx\tx\tx\t2\tx
x\tx\tx\tx\tx\t7\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\tx\t2\tx\t3\tx\tx\tx\tx\t3\tx\t2\tx\t1\tx\t2\tx\tx\t2\t2\t2\t2\t2\t2\tx\t2\tx\t2\t2\t2\tx\t2\tx
x\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t1\tx\t2\tx\t3\tx\t9\t10\tx\t3\tx\t2\tx\t1\tx\t2\t2\tx\t2\t2\t2\t2\t2\tx\tx\t2\tx\t2\t2\t2\tx\t2\tx
x\t1\t3\t1\tx\tx\tx\t4\tx\tx\tx\tx\tx\t1\t3\t1\t3\t1\tx\t1\tx\t2\tx\t3\t7\t8\t9\tx\t3\tx\t2\tx\t1\tx\t2\t2\tx\t2\t2\t2\t2\tx\tx\t2\t2\tx\tx\tx\tx\tx\t2\tx
x\t1\t3\t1\t5\t1\t1\t1\t1\t1\t1\t1\tx\t1\t3\t1\t3\t1\tx\t1\tx\t2\tx\t3\tx\tx\tx\tx\t3\tx\t2\tx\t1\tx\t2\t2\tx\t2\t2\t2\tx\tx\t2\t2\t2\t2\t2\t2\tx\tx\t2\tx
x\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\tx\t1\tx\t2\tx\t3\t3\t3\t3\t3\t3\tx\t2\tx\t1\tx\t2\t2\tx\t2\t2\t2\tx\t2\t2\t2\t2\t2\t2\tx\tx\t2\t2\tx
x\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t5\tx\tx\tx\t1\tx\t2\tx\tx\tx\tx\tx\tx\tx\tx\t2\tx\t1\tx\t2\t2\tx\t2\t2\t2\tx\t2\t2\t2\t2\t2\tx\tx\t2\t2\t2\tx
x\t1\t1\tx\t1\t1\t1\t4\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\tx\t1\t5\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx\t1\tx\t2\tx\tx\tx\t2\t2\tx\t2\t2\t2\t2\tx\tx\t2\t2\t2\t2\tx
x\t1\t1\tx\t1\t3\t1\tx\t1\t3\t1\tx\t1\t1\t1\t1\t1\t1\tx\t1\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\tx\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx
x\t1\t1\tx\t1\t3\t1\tx\t1\t3\t1\tx\t3\t3\t3\t3\t3\t3\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx
x\t1\t1\t3\t1\t1\t1\tx\t1\t1\t1\t5\t1\t1\t1\t1\t1\t1\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t7\tx\tx\tx\tx\tx\tx
x\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\t1\tx\t8\tx\t1\t1\tx\t1\t1\tx\t1\t1\tx\t1\t1\t1\tx\t1\t1\t1\t1\t1\tx\t1\t2\t3\t4\t5\t5\t5\t4\t3\t2\t1\tx
x\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t3\t3\t3\t3\t3\t3\tx\t4\tx\t1\t1\tx\t1\t1\tx\t1\t1\tx\t1\t3\t1\tx\t1\t3\t3\t3\t1\tx\t1\t2\t3\t4\t4\t4\t4\t4\t3\t2\t1\tx
x\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t2\tx\t1\t1\tx\t1\t1\tx\t1\t1\tx\t1\t3\t1\tx\t1\t3\t9\t3\t1\tx\t1\t2\t3\t3\t3\t3\t3\t3\t3\t2\t1\tx
x\t5\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t4\tx\tx\tx\tx\t1\t1\tx\t1\t1\tx\t1\t1\tx\t1\t1\t1\tx\t1\t3\t3\t3\t1\tx\t1\t2\t2\t2\t2\t2\t2\t2\t2\t2\t1\tx
x\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx\t1\t1\t1\t1\t1\t1\t1\t1\tx\tx\t4\tx\tx\t4\tx\tx\t4\tx\t1\t3\t1\tx\t1\t1\t1\t1\t1\t6\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\tx
x\t2\t2\t2\t2\t2\t2\t2\t2\t2\t2\tx\t1\t1\t1\t1\t1\t1\t1\t1\t5\t1\t1\t5\t2\t2\t2\t2\t2\tx\t1\t3\t1\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t7\tx
x\tx\tx\tx\tx\tx\tx\tx\tx\tx\t6\tx\tx\tx\tx\tx\tx\tx\tx\t5\tx\tx\t5\tx\tx\tx\tx\tx\tx\tx\t1\t1\t1\t5\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t2\tx
x\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t6\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\tx\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t1\t2\tx\tx
x\t1\t3\t1\t3\t1\t3\t1\t3\t1\t3\t1\tx\tx\tx\tx\tx\tx\t1\t1\tx\t1\t3\t1\t3\t1\t3\t1\tx\t9\t3\t3\t3\tx\t1\t1\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t2\tx\tx\tx
x\t1\t3\t1\t3\t1\t3\t1\t3\t1\t3\t1\t1\t1\t1\t3\t3\tx\t1\t1\tx\t1\t3\t1\t3\t1\t3\t1\tx\tx\tx\tx\t6\tx\t4\tx\tx\tx\tx\tx\t1\t1\t1\t1\t1\t1\t1\t2\tx\tx\t8\tx
x\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t3\t3\tx\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t1\t5\t1\t1\t1\tx\t2\t2\t2\t2\t2\tx\t1\t1\t1\t1\t1\t1\t2\tx\tx\t1\t1\tx
x\tx\tx\tx\tx\t6\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t6\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\t1\t3\t1\tx\t2\t2\t2\t2\t2\tx\t1\t1\t1\t1\t1\t2\t7\tx\t1\t1\t1\tx
x\t1\t1\t1\t1\t1\t1\tx\t1\t1\t1\t5\t1\t1\t1\tx\t1\tx\t1\t1\t1\tx\t1\t1\t1\t1\t1\t1\t1\t5\t1\t3\t1\tx\tx\tx\tx\tx\t4\tx\t1\t1\t1\t1\t2\t7\t7\to\t1\t1\t3\tx
x\t1\t1\t1\t1\t1\t1\tx\t1\t3\t1\tx\t1\t1\t1\tx\t1\tx\t1\tx\t1\tx\t1\t3\t3\t1\t3\t3\t1\tx\t1\t1\t1\tx\t1\t1\t1\t1\t1\tx\t1\t1\t1\t2\tx\tx\to\to\t1\t3\t5\tx
x\t3\t1\t1\t1\t1\t1\tx\t3\t5\t3\tx\t1\t1\t2\tx\t1\tx\t1\tx\t1\tx\t1\t1\t1\t1\t1\t1\t1\tx\t1\t3\t1\tx\t1\t1\t1\t1\t1\tx\t1\t1\t2\tx\tx\t1\t1\t1\t3\t5\t6\tx
x\t5\t3\t1\t1\t1\t1\tx\t1\t3\t1\tx\t1\t2\t4\tx\t1\tx\t1\tx\t1\tx\t1\t3\t3\t1\t3\t3\t1\tx\t1\t3\t1\tx\t1\t1\t1\t1\t1\tx\t1\t2\tx\tx\t1\t1\t1\t3\t5\t6\t7\tx
x\t10\t5\t3\t1\t1\t1\t5\t1\t1\t1\tx\t2\t4\t8\tx\t1\t1\t1\tx\t1\t4\t1\t1\t1\t1\t1\t1\t1\tx\t1\t1\t1\t5\t1\t1\t1\t1\t1\t5\t2\tx\tx\t8\t1\t1\t3\t5\t6\t7\t10\tx
x\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx\tx
`;

const chestsAsObj = [
  {
    x: 50, y: 1, amount: 10, bonus: 3,
    html: `–ò–∑–≤–µ—Å—Ç–Ω—ã–π –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π —Ñ–∏–∑–∏–∫ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫, –æ–¥–∏–Ω –∏–∑ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –î–∂–æ–∑–∞–π—è –ì–∏–±–±—Å (1839‚Äì1903), –±—ã–ª –æ—á–µ–Ω—å –Ω–µ—Ä–∞–∑–≥–æ–≤–æ—Ä—á–∏–≤—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º –∏ –æ–±—ã—á–Ω–æ –º–æ–ª—á–∞–ª –Ω–∞ –∑–∞—Å–µ–¥–∞–Ω–∏—è—Ö –£—á–µ–Ω–æ–≥–æ –°–æ–≤–µ—Ç–∞ –ô–µ–ª—å—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞–ª. –ù–æ –æ–¥–Ω–∞–∂–¥—ã –æ–Ω –Ω–µ —Å–¥–µ—Ä–∂–∞–ª—Å—è. –ù–∞ –æ–¥–Ω–æ–º –∏–∑ –∑–∞—Å–µ–¥–∞–Ω–∏–π –∑–∞—à–µ–ª —Å–ø–æ—Ä –æ —Ç–æ–º, —á–µ–º—É –±–æ–ª—å—à–µ —É–¥–µ–ª—è—Ç—å –≤–Ω–∏–º–∞–Ω–∏—è –≤ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö ‚Äî –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–∞–º –∏–ª–∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ. –ù–µ –≤—ã–¥–µ—Ä–∂–∞–≤, –ì–∏–±–±—Å –ø–æ–¥–Ω—è–ª—Å—è —Å –º–µ—Å—Ç–∞ –∏ –ø—Ä–æ–∏–∑–Ω–µ—Å —Ü–µ–ª—É—é —Ä–µ—á—å: ¬´–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ ‚Äî —ç—Ç–æ —è–∑—ã–∫!¬ª`,
  },
  {
    x: 14, y: 3, amount: 8, bonus: 2,
    html: `–ö–æ–≥–¥–∞ –•–∞—Ä–¥–∏ –Ω–∞–≤–µ—â–∞–ª –≤ –±–æ–ª—å–Ω–∏—Ü–µ –†–∞–º–∞–Ω—É–¥–∂–∞–Ω–∞, –æ–Ω, –ø–æ –µ–≥–æ —Å–ª–æ–≤–∞–º, –Ω–∞—á–∞–ª —Ä–∞–∑–≥–æ–≤–æ—Ä —Å —Ç–æ–≥–æ, —á—Ç–æ ¬´–ø–æ–∂–∞–ª–æ–≤–∞–ª—Å—è¬ª –Ω–∞ —Ç–æ, —á—Ç–æ –ø—Ä–∏–µ—Ö–∞–ª –Ω–∞ —Ç–∞–∫—Å–∏ —Å–æ —Å–∫—É—á–Ω—ã–º, –Ω–µ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º ¬´1729¬ª. –†–∞–º–∞–Ω—É–¥–∂–∞–Ω —Ä–∞–∑–≤–æ–ª–Ω–æ–≤–∞–ª—Å—è –∏ –≤–æ—Å–∫–ª–∏–∫–Ω—É–ª: ¬´–•–∞—Ä–¥–∏, –Ω—É –∫–∞–∫ –∂–µ, –•–∞—Ä–¥–∏, —ç—Ç–æ –∂–µ —á–∏—Å–ª–æ ‚Äî –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ, –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º–æ–µ –≤ –≤–∏–¥–µ —Å—É–º–º—ã –∫—É–±–æ–≤ –¥–≤—É–º—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏!¬ª. –í–æ—Ç —ç—Ç–∏ —Å–ø–æ—Å–æ–±—ã: 1729 = 1¬≥ + 12¬≥ = 9¬≥ + 10¬≥`,
  },
  {
    x: 11, y: 8, amount: 8, bonus: 2,
    html: `–° –∏–º–µ–Ω–µ–º –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–≥–æ –ü—å–µ—Ä–∞ –§–µ—Ä–º–∞ —Å–≤—è–∑–∞–Ω–æ –º–Ω–æ–≥–æ —Ç–∞–π–Ω. –û–¥–Ω–∞–∂–¥—ã –æ–Ω –ø–æ–ª—É—á–∏–ª –ø–∏—Å—å–º–æ —Å –≤–æ–ø—Ä–æ—Å–æ–º: ¬´–Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—Ä–æ—Å—Ç—ã–º —á–∏—Å–ª–æ 100895598169?¬ª –§–µ—Ä–º–∞ –Ω–µ–∑–∞–º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª, —á—Ç–æ —ç—Ç–æ –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç–∏–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –¥–≤—É—Ö –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª: 898423 –∏ 112303. –°–ø–æ—Å–æ–± –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —á–∏—Å–ª–∞ –æ–Ω –Ω–µ —Ä–∞—Å–∫—Ä—ã–ª.<br><a href="http://kvant.mccme.ru/1972/07/tak_ili_ne_tak_dejstvoval_ferm.htm" target="_blank">–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏</a>.`,
  },
  {
    x: 50, y: 11, amount: 9, bonus: 2,
    html: `–ß—Ç–æ –ª—É—á—à–µ: –≤–µ—á–Ω–æ–µ –±–ª–∞–∂–µ–Ω—Å—Ç–≤–æ –∏–ª–∏ –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å –≤–µ—Ç—á–∏–Ω–æ–π? –ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤–µ—á–Ω–æ–µ –±–ª–∞–∂–µ–Ω—Å—Ç–≤–æ –ª—É—á—à–µ, –Ω–æ –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –Ω–µ —Ç–∞–∫! –°—É–¥–∏—Ç–µ —Å–∞–º–∏. –ß—Ç–æ –ª—É—á—à–µ –≤–µ—á–Ω–æ–≥–æ –±–ª–∞–∂–µ–Ω—Å—Ç–≤–∞? <i>–ù–∏—á–µ–≥–æ</i>. –ê –±—É—Ç–µ—Ä–±–æ–¥ —Å –≤–µ—Ç—á–∏–Ω–æ–π –ª—É—á—à–µ, —á–µ–º <i>–Ω–∏—á–µ–≥–æ</i>. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å –≤–µ—Ç—á–∏–Ω–æ–π –ª—É—á—à–µ, —á–µ–º –≤–µ—á–Ω–æ–µ –±–ª–∞–∂–µ–Ω—Å—Ç–≤–æ.`,
  },
  {
    x: 34, y: 12, amount: 9, bonus: 2,
    html: `–ö–æ–≥–¥–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫ –î–∂–æ—Ä–¥–∂ –î–∞–Ω—Ü–∏–≥ –±—ã–ª –µ—â–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–º, –æ–Ω —á–∞—Å—Ç–æ –∑–∞—Å–∏–∂–∏–≤–∞–ª—Å—è –∑–∞ –∑–∞–Ω—è—Ç–∏—è–º–∏ –¥–æ –ø–æ–∑–¥–Ω–µ–π –Ω–æ—á–∏. –û–¥–Ω–∞–∂–¥—ã –æ–Ω –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ –ø—Ä–æ—Å–ø–∞–ª –∏ –æ–ø–æ–∑–¥–∞–ª –Ω–∞ –ø–æ–ª—á–∞—Å–∞ –Ω–∞ –ª–µ–∫—Ü–∏—é –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä–∞ –ù–µ–π–º–∞–Ω–∞. –£—Å–µ–≤—à–∏—Å—å –∑–∞ –ø–∞—Ä—Ç—É –î–∂–æ—Ä–¥–∂ –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–ø–∏—Å–∞–ª –¥–≤–µ –∑–∞–¥–∞—á–∏ —Å –¥–æ—Å–∫–∏, —Ä–µ—à–∏–≤, —á—Ç–æ —ç—Ç–æ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ. –ó–∞–¥–∞—á–∏ –±—ã–ª–∏ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã, –Ω–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–Ω—è—Ç–∏—é –æ–Ω –≤—Å—ë-—Ç–∞–∫–∏ –∏—Ö —Å–¥–µ–ª–∞–ª. –ö–æ–≥–¥–∞ –æ–Ω –ø—Ä–∏–Ω—ë—Å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä—É, –ù–µ–π–º–∞–Ω –º–æ–ª—á–∞ –≤–∑—è–ª –ª–∏—Å—Ç–∫–∏ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ –∏ —É–±—Ä–∞–ª –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å, —Ç–∞–∫ —á—Ç–æ –î–∂–æ—Ä–¥–∂ —Ä–µ—à–∏–ª, —á—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä –≤—Å—ë –µ—â—ë —Å–µ—Ä–¥–∏—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ –∑–∞ —Ç–æ –æ–ø–æ–∑–¥–∞–Ω–∏–µ. –ê —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä –ù–µ–π–º–∞–Ω —Å –∫—Ä–∏–∫–æ–º –≤–æ—Ä–≤–∞–ª—Å—è –≤ –¥–æ–º –î–∂–æ—Ä–¥–∂–∞ –≤ —à–µ—Å—Ç—å —É—Ç—Ä–∞! –û–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ —Å—Ç—É–¥–µ–Ω—Ç –î–∂–æ—Ä–¥–∂ –î–∞–Ω—Ü–∏–≥ –Ω–∞—à—ë–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–≤—É—Ö –∑–∞–¥–∞—á –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä —Å—á–∏—Ç–∞–ª–∏—Å—å –Ω–µ—Ä–∞–∑—Ä–µ—à–∏–º—ã–º–∏. –°–∞–º –î–∂–æ—Ä–¥–∂ –æ–± —ç—Ç–æ–º –∏ –Ω–µ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–ª, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ –∑–∞–Ω—è—Ç–∏–µ –æ–ø–æ–∑–¥–∞–ª –∏ –Ω–µ —Å–ª—ã—à–∞–ª, —á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä –ù–µ–π–º–∞–Ω –æ –∑–∞–¥–∞—á–∞—Ö –Ω–∞ –¥–æ—Å–∫–µ. –û–Ω –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ –∑–Ω–∞–ª –æ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ —ç—Ç–∏—Ö –¥–≤—É—Ö –∑–∞–¥–∞—á!`,
  },
  {
    x: 29, y: 17, amount: 8, bonus: 2,
    html: `–õ—é–±—ã–µ –¥–≤–µ –≥—Ä–∞–Ω–∏ —Ç–µ—Ç—Ä–∞—ç–¥—Ä–∞ –∏–º–µ—é—Ç –æ–±—â–µ–µ —Ä–µ–±—Ä–æ, –∞ –ª—é–±—ã–µ –¥–≤–µ –≤–µ—Ä—à–∏–Ω—ã —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –æ–±—â–∏–º —Ä–µ–±—Ä–æ–º.
–ê –º–æ–∂–µ—Ç –ª–∏ –±—ã—Ç—å –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫ —É –∫–æ—Ç–æ—Ä–æ–≥–æ –ª—é–±—ã–µ –¥–≤–µ –≥—Ä–∞–Ω–∏ –∏–º–µ—é—Ç –æ–±—â–µ–µ —Ä–µ–±—Ä–æ?
–ü–æ–∫–∞ —É–¥–∞–ª–æ—Å—å –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–∞–∫–æ–π –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫: –≤ 1977 –≥–æ–¥—É –õ–∞–π–æ—à –°–∏–ª–ª–∞—à–∏ –ø–æ—Å—Ç—Ä–æ–∏–ª –ø–æ–ª–∏—ç–¥—Ä–∞–ª—å–Ω—ã–π —Ç–æ—Ä (–º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫ –°–∏–ª–ª–∞—à–∏).
<br>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Szilassi_polyhedron.gif/220px-Szilassi_polyhedron.gif">
<br>
–£ –Ω–∞—Å –≤ 179-–π —à–∫–æ–ª–µ –µ—Å—Ç—å –∫—Ä—É–ø–Ω–∞—è –º–æ–¥–µ–ª—å —ç—Ç–æ–≥–æ –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞. –ú–æ–∂–µ—Ç –±—ã—Ç—å, –≤–∞–º —É–¥–∞—Å—Ç—Å—è —É–≥–æ–≤–æ—Ä–∏—Ç—å –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –∏–∑ —Å—Ç–∞—Ä—à–∏—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –≤–∞–º –µ—ë –ø–æ–∫–∞–∑–∞—Ç—å?`,
  },
  {
    x: 25, y: 25, amount: 9, bonus: 2,
    html: `–í 1852 –≥–æ–¥—É –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –±–æ—Ç–∞–Ω–∏–∫ –∏ –ª–æ–≥–∏–∫ –§—Ä—ç–Ω—Å–∏—Å –ì—É—Ç—Ä–∏ —Ä–∞–±–æ—Ç–∞–ª –≤ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏. –ü—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã –≥—Ä–∞—Ñ—Å—Ç–≤ –ê–Ω–≥–ª–∏–∏, –æ–Ω –æ–±—Ä–∞—Ç–∏–ª –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –¥–ª—è —Ç–∞–∫–æ–π —Ü–µ–ª–∏ —Ö–≤–∞—Ç–∞–µ—Ç —á–µ—Ç—ã—Ä—ë—Ö –∫—Ä–∞—Å–æ–∫.
–ì—É—Ç—Ä–∏ —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ–± —ç—Ç–æ–º —Å–≤–æ–µ–º—É –±—Ä–∞—Ç—É, –∞ —Ç–æ—Ç ‚Äî –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –ê–≤–≥—É—Å—Ç—É –¥–µ –ú–æ—Ä–≥–∞–Ω—É.
–î–µ –ú–æ—Ä–≥–∞–Ω –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª—Å—è –≤–æ–ø—Ä–æ—Å–æ–º: –º–æ–∂–Ω–æ –ª–∏ –ª—é–±—É—é –∫–∞—Ä—Ç—É –ø–æ–∫—Ä–∞—Å–∏—Ç—å –≤ 4 —Ü–≤–µ—Ç–∞?
–û—Ç –Ω–µ–≥–æ —ç—Ç–æ—Ç –∑–∞–±–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Å—Ç–∞–ª –∏–∑–≤–µ—Å—Ç–µ–Ω –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–º –ê–Ω–≥–ª–∏–∏, –∏ –¥–æ–≤–æ–ª—å–Ω–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤–Ω–µ—à–Ω—é—é –ø—Ä–æ—Å—Ç–æ—Ç—É, –¥–æ–∫–∞–∑–∞—Ç—å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∏–∫–∞–∫ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è.
–í 1878 –≥–æ–¥—É –ê—Ä—Ç—É—Ä –ö—ç–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª ¬´–ü—Ä–æ–±–ª–µ–º—É —á–µ—Ç—ã—Ä—ë—Ö –∫—Ä–∞—Å–æ–∫¬ª.
–ó–∞ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±—Ä–∞–ª–∏—Å—å —Å–∞–º—ã–µ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –ê–Ω–≥–ª–∏–∏, –Ω–æ –∏ –º–∏—Ä–∞.
–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞–¥–∞—á–∞ –æ–±—ä—è–≤–ª—è–ª–∞—Å—å —Ä–µ—à—ë–Ω–Ω–æ–π, –Ω–æ –∑–∞—Ç–µ–º –≤ —Ä–µ—à–µ–Ω–∏–π –Ω–∞—Ö–æ–¥–∏–ª–∏ –æ—à–∏–±–∫—É. –û—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–ª–∏—Å—å, –Ω–æ –≥–æ–¥—ã —Å–ø—É—Å—Ç—è –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–ª–∏—Å—å –Ω–æ–≤—ã–µ ‚Äî –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö.
–¢–µ–æ—Ä–µ–º–∞ –æ —á–µ—Ç—ã—Ä—ë—Ö –∫—Ä–∞—Å–∫–∞—Ö –±—ã–ª–∞ –¥–æ–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 100 –ª–µ—Ç, –≤ 1976 –≥–æ–¥—É ‚Äî –∏ —Å—Ç–∞–ª–∞ –ø–µ—Ä–≤–æ–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ–æ—Ä–µ–º–æ–π, –¥–æ–∫–∞–∑–∞–Ω–Ω–æ–π —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.`,
  },
  {
    x: 26, y: 25, amount: 10, bonus: 9,
    html: `–ì—É–≥–æ–ª ‚Äî —ç—Ç–æ —á–∏—Å–ª–æ –≤–∏–¥–∞ 100...00 —Å–æ 100 –Ω—É–ª—è–º–∏.
–í 1938 –≥–æ–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –º–∞—Ç–µ–º–∞—Ç–∏–∫ –≠–¥–≤–∞—Ä–¥ –ö–∞–∑–Ω–µ—Ä –≥—É–ª—è–ª –ø–æ –ø–∞—Ä–∫—É —Å –¥–≤—É–º—è —Å–≤–æ–∏–º–∏ –ø–ª–µ–º—è–Ω–Ω–∏–∫–∞–º–∏ –∏ –æ–±—Å—É–∂–¥–∞–ª —Å –Ω–∏–º–∏ –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞. –í —Ö–æ–¥–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∑–∞—à–ª–∞ —Ä–µ—á—å –æ —á–∏—Å–ª–µ —Å–æ —Å—Ç–∞ –Ω—É–ª—è–º–∏, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –±—ã–ª–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è. –û–¥–∏–Ω –∏–∑ –ø–ª–µ–º—è–Ω–Ω–∏–∫–æ–≤, –¥–µ–≤—è—Ç–∏–ª–µ—Ç–Ω–∏–π –ú–∏–ª—Ç–æ–Ω –°–∏—Ä–æ—Ç—Ç–∞, –ø—Ä–µ–¥–ª–æ–∂–∏–ª –Ω–∞–∑–≤–∞—Ç—å —ç—Ç–æ —á–∏—Å–ª–æ ¬´–≥—É–≥–æ–ª¬ª (–∞–Ω–≥–ª. googol). 
–¢–µ—Ä–º–∏–Ω ¬´–≥—É–≥–æ–ª¬ª –Ω–µ –∏–º–µ–µ—Ç —Å–µ—Ä—å—ë–∑–Ω–æ–≥–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –ö–∞–∑–Ω–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–∏–ª –µ–≥–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –Ω–µ–≤–æ–æ–±—Ä–∞–∑–∏–º–æ –±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å—é: –≥—É–≥–æ–ª –±–æ–ª—å—à–µ, —á–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ç–æ–º–æ–≤ –≤ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –Ω–∞–º —á–∞—Å—Ç–∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π, –∫–æ—Ç–æ—Ä—ã—Ö, –ø–æ —Ä–∞–∑–Ω—ã–º –æ—Ü–µ–Ω–∫–∞–º, –Ω–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç 10‚Å∑‚Åπ –¥–æ 10‚Å∏¬π.
–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ Google —è–≤–ª—è–µ—Ç—Å—è –∏—Å–∫–∞–∂—ë–Ω–Ω—ã–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Å–ª–æ–≤–∞ ¬´googol¬ª. –°–æ–∑–¥–∞—Ç–µ–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–æ–∏—Å–∫–æ–≤–æ–π –º–∞—à–∏–Ω—ã —Ö–æ—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Ä–º–∏–Ω ¬´googol¬ª –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –Ω–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ —Ç–∞–∫–æ–π –¥–æ–º–µ–Ω —É–∂–µ –∑–∞–Ω—è—Ç.`,
  },
  {
    x: 25, y: 26, amount: 8, bonus: 2,
    html: `–ü–æ–∂–∞–ª—É–π, –æ–¥–∏–Ω –∏–∑ –ª—É—á—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å ¬´–ö–æ–º—É –Ω—É–∂–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞?¬ª –¥–∞–ª –º–∞—Ç–µ–º–∞—Ç–∏–∫ –ø–æ –∏–º–µ–Ω–∏ –ú–∞—Ä—Ç–∏–Ω –ì—Ä–æ—Ç—à–µ–ª.
–ö–∞–∫-—Ç–æ —Ä–∞–∑ –Ω–µ–º–µ—Ü–∫–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ —Ä–µ—à–∏–ª–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ü–µ–ª–µ–≤—ã–º –æ–±—Ä–∞–∑–æ–º –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–∞–º—ã—Ö
–ø–µ—Ä–µ–¥–æ–≤—ã—Ö –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –Ω–∞—É–∫–∏. –ù–∞ –∑–∞—Å–µ–¥–∞–Ω–∏–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏ –±—ã–ª–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏ –≤—Å–µ—Ö –Ω–∞—É–∫. –ì—Ä–æ—Ç—à–µ–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –∏ –≤—ã—Å—Ç—É–ø–∞–ª –ø–æ—Å–ª–µ–¥–Ω–∏–º. –ó–∞—Å–µ–¥–∞–Ω–∏–µ —É–∂–µ –ø–æ–¥—Ö–æ–¥–∏–ª–æ –∫ –∫–æ–Ω—Ü—É, —á–∏–Ω–æ–≤–Ω–∏–∫–∏ —Å–∏–¥–µ–ª–∏ –æ—Å–æ–ª–æ–≤–µ–≤—à–∏–µ –æ—Ç –æ–±—Ä—É—à–µ–Ω–Ω–æ–≥–æ –Ω–∞ –Ω–∏—Ö –ø–æ—Ç–æ–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞ –æ—Ä–∞—Ç–æ—Ä–æ–≤. –ì—Ä–æ—Ç—à–µ–ª –≤—ã—à–µ–ª –Ω–∞ —Ç—Ä–∏–±—É–Ω—É –∏ —Å–∫–∞–∑–∞–ª –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:
<br>
‚Äî –£–≤–∞–∂–∞–µ–º—ã–µ –≥–æ—Å–ø–æ–¥–∞! –Ø –Ω–µ –±—É–¥—É —É—Ç–æ–º–ª—è—Ç—å –≤–∞—Å –¥–ª–∏–Ω–Ω–æ–π —Ä–µ—á—å—é, –∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–≤–µ–¥—É –ø—Ä–∏–º–µ—Ä. –ù–µ–¥–∞–≤–Ω–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –∑–∞–∫–∞–∑ –æ—Ç –±–æ–ª—å—à–æ–π —Å—Ç—Ä–∞—Ö–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏, –ø–ª–∞–Ω–∏—Ä—É—é—â–µ–π —Å–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –ò–¥–µ—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞: –µ—Å–ª–∏ —É –∫–ª–∏–µ–Ω—Ç–∞ –≤ –¥–æ—Ä–æ–≥–µ —Å–ª–æ–º–∞–ª–∞—Å—å –º–∞—à–∏–Ω–∞, –æ–Ω –º–æ–∂–µ—Ç –ø–æ–∑–≤–æ–Ω–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏ –∫ –Ω–µ–º—É —Ç—É—Ç –∂–µ –ø—Ä–∏–µ–¥–µ—Ç –∞–≤–∞—Ä–∏–π–Ω–∞—è —Å–ª—É–∂–±–∞. –í–æ–ø—Ä–æ—Å –≤ —Ç–æ–º, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏—Å—Ç–∞–≤–∏—Ç—å –∫ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É –ª–∏—á–Ω—É—é –∞–≤–∞—Ä–∏–π–Ω—É—é –º–∞—à–∏–Ω—É —Å –º–µ—Ö–∞–Ω–∏–∫–æ–º. –¢–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–ª—É—á–∏—Ç –ø–æ–º–æ—â—å. –ù–æ —ç—Ç–æ –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ! –î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –≤–æ–æ–±—â–µ –Ω–µ —Å–≤—è–∑—ã–≤–∞—Ç—å—Å—è —Å –∞–≤–∞—Ä–∏–π–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º. –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∂–¥–∞—Ç—å –¥–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏, –∑–∞—Ç–æ —ç—Ç–æ –Ω–µ –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å –∏–º –Ω–∏ —Ü–µ–Ω—Ç–∞. –¢–∞–∫ –≤–æ—Ç. –ï—Å–ª–∏ –≤–∞—Å —ç—Ç–∏ —Ä–µ—à–µ–Ω–∏—è –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç, —Ç–æ —è –¥–æ–ª–∂–µ–Ω –≤–∞–º —Å–æ–æ–±—â–∏—Ç—å, —á—Ç–æ –¥–ª—è –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ.`,
  },
  {
    x: 26, y: 26, amount: 9, bonus: 2,
    html: `–õ–µ–≥–∫–æ–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å ‚Äî –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–∞—è —à—Ç—É–∫–∞. –ò –≤–æ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –±–µ–∑ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –∫–æ–ª—ë—Å, –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –±–µ–∑ –≥–µ–æ–º–µ—Ç—Ä–∏–∏! –ü—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ –ø–µ—Ä–µ–¥–Ω–∏–µ –∫–æ–ª—ë—Å–∞ –Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥—É –∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –∫–∞–∂–¥–æ–µ –Ω–∞ —Å–≤–æ–π —É–≥–æ–ª. –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–≤–æ—Ä–æ—Ç –∫–æ–ª—ë—Å –Ω–∞ –Ω—É–∂–Ω—ã–π —É–≥–æ–ª, –ø—Ä–∏–¥—É–º–∞–ª —Ñ—Ä–∞–Ω—Ü—É–∑, –∫–∞—Ä–µ—Ç–Ω—ã—Ö –¥–µ–ª –º–∞—Å—Ç–µ—Ä –®–∞—Ä–ª—å –ñ–∞–Ω—Ç–æ (Charles Jeantand). –û–¥–Ω–∞–∫–æ –¥–ª—è –∫–∞—Ä–µ—Ç, –ø–µ—Ä–µ–¥–≤–∏–≥–∞–≤—à–∏—Ö—Å—è —Å –º–∞–ª—ã–º–∏ —Å–∫–æ—Ä–æ—Å—Ç—è–º–∏, —ç—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ, –∫–∞–∫ –¥–ª—è –º–∞—à–∏–Ω, –∏ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –ñ–∞–Ω—Ç–æ –±—ã–ª–æ –∑–∞–±—ã—Ç–æ. –õ–∏—à—å –ø–æ—á—Ç–∏ —á–µ—Ä–µ–∑ —Ç—Ä–∏ —á–µ—Ç–≤–µ—Ä—Ç–∏ –≤–µ–∫–∞ –¥–≤–∞ –æ—Ç—Ü–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ—Å—Ç—Ä–æ–µ–Ω–∏—è, –¥–≤–∞ –Ω–µ–º—Ü–∞, –¥–≤–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞ ‚Äî –ì–æ—Ç—Ç–ª–∏–± –î–∞–π–º–ª–µ—Ä (Gottlieb Wilhelm Daimler) –∏ –ö–∞—Ä–ª –ë–µ–Ω—Ü (Karl Friedrich Michael Benz) ‚Äî –∏–∑–æ–±—Ä–µ—Ç–∞—è —Å–≤–æ–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫ —Ç—Ä–∞–ø–µ—Ü–∏–∏ –ñ–∞–Ω—Ç–æ. –í 1889 –≥–æ–¥—É –î–∞–π–º–ª–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ç–µ–Ω—Ç –Ω–∞ ¬´—Å–ø–æ—Å–æ–± –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥–Ω–∏–º–∏ –∫–æ–ª—ë—Å–∞–º–∏ —Å —Ä–∞–∑–Ω–æ–≤–µ–ª–∏–∫–∏–º–∏ —Ä–∞–¥–∏—É—Å–∞–º–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞¬ª.
<br>
–ù–∞ —Å–∞–π—Ç–µ <a href="https://etudes.ru/etudes/steering-geometry/" target="_blank">–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —ç—Ç—é–¥–æ–≤</a> –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–æ —ç—Ç—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é.`,
  },
  {
    x: 19, y: 34, amount: 8, bonus: 2,
    html: `–ò–º—è –ù–∏–∫–æ–ª–∞—è –ò–≤–∞–Ω–æ–≤–∏—á–∞ –õ–æ–±–∞—á–µ–≤—Å–∫–æ–≥–æ –Ω–µ¬†–≥—Ä–µ–º–µ–ª–æ –≤¬†–º–∏—Ä–æ–≤–æ–º –Ω–∞—É—á–Ω–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ, –ø–æ–∫–∞ –æ–Ω¬†–±—ã–ª¬†–∂–∏–≤. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫ –ü—É—à–∫–∏–Ω–∞ –∏¬†–ü–∏—Ä–æ–≥–æ–≤–∞, –æ–Ω¬†–Ω–µ¬†–ø–æ–ª—É—á–∞–ª –ø—Ä–µ–º–∏–π, –æ¬†–Ω–µ–º –Ω–µ¬†–ø–∏—Å–∞–ª–∏ –Ω–∞¬†–ø–µ—Ä–≤—ã—Ö –ø–æ–ª–æ—Å–∞—Ö –≥–∞–∑–µ—Ç, —Ö–æ—Ç—è –∫–∞–∫ —Ä–µ–∫—Ç–æ—Ä –æ–¥–Ω–æ–≥–æ –∏–∑¬†–≤–µ–¥—É—â–∏—Ö —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤ –æ–Ω¬†–±—ã–ª –∏–∑–≤–µ—Å—Ç–µ–Ω¬†‚Äî –∫–∞–∫ –≤¬†–ö–∞–∑–∞–Ω–∏, —Ç–∞–∫ –∏¬†–∑–∞¬†–µ–µ¬†–ø—Ä–µ–¥–µ–ª–∞–º–∏. –ü–µ—Ä–≤—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –õ–æ–±–∞—á–µ–≤—Å–∫–æ–≥–æ –ø–æ¬†–Ω–µ–µ–≤–∫–ª–∏–¥–æ–≤–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –≤—ã—à–ª–∏ –≤¬†1829‚Äì1830¬†–≥–≥. –≤¬†–∂—É—Ä–Ω–∞–ª–µ ¬´–ö–∞–∑–∞–Ω—Å–∫–∏–π –≤–µ—Å—Ç–Ω–∏–∫¬ª
–ß—Ç–æ –∂–µ —Ç–∞–∫–æ–µ –Ω–µ–µ–≤–∫–ª–∏–¥–æ–≤–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è? –≠—Ç–æ ‚Äî –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ç–µ–æ—Ä–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ç–µ—Ö –∂–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞–∫—Å–∏–æ–º–∞—Ö, —á—Ç–æ –∏ –æ–±—ã—á–Ω–∞—è –µ–≤–∫–ª–∏–¥–æ–≤–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∞–∫—Å–∏–æ–º—ã –æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä—è–º—ã—Ö.
–í –∞–∫—Å–∏–æ–º–µ ¬´–ù–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É, –Ω–µ –ª–µ–∂–∞—â—É—é –Ω–∞ –¥–∞–Ω–Ω–æ–π –ø—Ä—è–º–æ–π, –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ä–æ–≤–Ω–æ –æ–¥–Ω—É –ø—Ä—è–º—É—é, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –¥–∞–Ω–Ω–æ–π¬ª –∫–æ–Ω—Ü–æ–≤–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ ¬´–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –¥–≤–µ –ø—Ä—è–º—ã–µ, –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ –¥–∞–Ω–Ω—É—é¬ª.
–û–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –≥–µ–æ–º–µ—Ç—Ä–∏—è –õ–æ–±–∞—á–µ–≤—Å–∫–æ–≥–æ —Å–≤—è–∑–∞–Ω–∞ —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–∏–µ–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –±–µ–∑ —Ö–æ—Ä–æ—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å GPS.`,
  },
  {
    x: 36, y: 36, amount: 9, bonus: 2,
    html: `–ù–µ–≤–∞–ª—è—à–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–≤–æ—ë –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –≥—Ä—É–∑—É –≤–Ω–∏–∑—É –∏–≥—Ä—É—à–∫–∏. –ê –≤ 2006-–º –≥–æ–¥—É –≤–µ–Ω–≥–µ—Ä—Å–∫–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –î–æ–º–æ–∫–æ—à –∏ –í–∞—Ä–∫–æ–Ω—å–∏ –ø—Ä–∏–¥—É–º–∞–ª–∏ –ø—Ä–∏–º–µ—Ä –≤—ã–ø—É–∫–ª–æ–≥–æ —Ç–µ–ª–∞ (–±–µ–∑ –ø–æ–ª–æ—Å—Ç–µ–π –∏ ¬´–≥—Ä—É–∑–æ–≤¬ª), –æ–±–ª–∞–¥–∞—é—â–µ–µ —ç—Ç–∏–º —Å–≤–æ–π—Å—Ç–≤–æ–º. –û–Ω–∏ –Ω–∞–∑–≤–∞–ª–∏ –µ–≥–æ –≥—ëÃÅ–º–±—ë—Ü. –ù–∞ —ç—Ç–æ —É –Ω–∏—Ö —É—à–ª–æ 10 –ª–µ—Ç.<br><a href="https://www.youtube.com/watch?v=J-5TIS49Kt8&t=1s" target="_blank">–û –≥—ë–º–±—ë—Ü–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫ –ù–∏–∫–æ–ª–∞–π –ê–Ω–¥—Ä–µ–µ–≤</a>`,
  },
  {
    x: 29, y: 42, amount: 9, bonus: 2,
    html: `–ü–∞—Ä–∫–µ—Ç–æ–º –Ω–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–±–∏–µ–Ω–∏–µ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –Ω–∞ –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Ç–∞–∫, —á—Ç–æ –ª—é–±—ã–µ –¥–≤–µ —Ñ–∏–≥—É—Ä—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏–±–æ –ø–æ —Ü–µ–ª–æ–π —Å—Ç–æ—Ä–æ–Ω–µ, –ª–∏–±–æ –ø–æ –≤–µ—Ä—à–∏–Ω–µ, –ª–∏–±–æ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –≤–æ–æ–±—â–µ. –†–∞–∑—É–º–µ–µ—Ç—Å—è, –ø—Ä–∏–¥—É–º–∞—Ç—å —Ç–∞–∫–∏—Ö —Ä–∞–∑–±–∏–µ–Ω–∏–π –º–æ–∂–Ω–æ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ, –Ω–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–≤ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –ø–∞—Ä–∫–µ—Ç—ã. –õ–µ–≥–∫–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –ø–∞—Ä–∫–µ—Ç –∏–∑ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ (–ª—é–±—ã—Ö) –∏–ª–∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤. –û–¥–Ω–∞–∫–æ –Ω–∞–∏–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π —Å–ª—É—á–∞–π –ø–∞—Ä–∫–µ—Ç–∞ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ –ø—è—Ç–∏—É–≥–æ–ª—å–Ω—ã–π –ø–∞—Ä–∫–µ—Ç. –í 1918 –≥–æ–¥—É –ö–∞—Ä–ª –†–∞–π–Ω—Ö–∞—Ä–¥—Ç –æ–ø–∏—Å–∞–ª –ø—è—Ç—å –∫–ª–∞—Å—Å–æ–≤ —Ç–∞–∫–∏—Ö –ø–∞—Ä–∫–µ—Ç–æ–≤. –î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ —Å—á–∏—Ç–∞–ª—Å—è –ø–æ–ª–Ω—ã–º, –ø–æ–∫–∞ –≤ 1968 –≥–æ–¥—É –†–æ–±–µ—Ä—Ç –ö–µ—Ä—à–Ω–µ—Ä –≤–¥—Ä—É–≥ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª –µ—â–µ —Ç—Ä–∏ —Ç–∞–∫–∏—Ö –∫–ª–∞—Å—Å–∞. –í 1975 –≥–æ–¥—É –º–∞—Ç–µ–º–∞—Ç–∏–∫ –†–∏—á–∞—Ä–¥ –î–∂–µ–π–º—Å —É–≤–µ–ª–∏—á–∏–ª —ç—Ç–æ —á–∏—Å–ª–æ –¥–æ –¥–µ–≤—è—Ç–∏. –¢—É—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ ‚Äî –æ–± –æ—Ç–∫—Ä—ã—Ç–∏–∏ –î–∂–µ–π–º—Å–∞ –Ω–∞–ø–∏—Å–∞–ª –∂—É—Ä–Ω–∞–ª Scientific American.
–°—Ç–∞—Ç—å—é —É–≤–∏–¥–µ–ª–∞ –ú–∞—Ä–¥–∂ –†–∞–π—Å, –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∞—è –¥–æ–º–æ—Ö–æ–∑—è–π–∫–∞ –∏ –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏—Ç–µ–ª—å—Å—Ç–≤—É –º–∞—Ç–µ–º–∞—Ç–∏–∫-–ª—é–±–∏—Ç–µ–ª—å. –†–∞–∑—Ä–∞–±–æ—Ç–∞–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞–ø–∏—Å–∏ –ø—è—Ç–∏—É–≥–æ–ª—å–Ω—ã—Ö –∑–∞–º–æ—â–µ–Ω–∏–π –æ–Ω–∞ –∑–∞ 10 –ª–µ—Ç –¥–æ–≤–µ–ª–∞ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ 14. –ò –≤–æ—Ç, –Ω–∞–∫–æ–Ω–µ—Ü, —Å–ø—É—Å—Ç—è 30 –ª–µ—Ç —É—á–µ–Ω—ã–µ –∏–∑ –í–∞—à–∏–Ω–≥—Ç–æ–Ω—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –≤ –ë–æ—Ç–µ–ª–ª–µ –æ—Ç–∫—Ä—ã–ª–∏ 15-–µ –∑–∞–º–æ—â–µ–Ω–∏–µ. –°–¥–µ–ª–∞–ª–∏ –æ–Ω–∏ —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø—å—é—Ç–µ—Ä–∞. –ò –≤–æ—Ç –Ω–∞–∫–æ–Ω–µ—Ü –≤ –∏—é–ª–µ 2017 –≥–æ–¥–∞ —Å—Ç–∞–ª–æ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ —Ñ—Ä–∞–Ω—Ü—É–∑ –ú–∏—Ö–∞—ç–ª—å –†–∞–æ –¥–æ–∫–∞–∑–∞–ª, —á—Ç–æ –Ω–∏—á–µ–≥–æ, –∫—Ä–æ–º–µ —ç—Ç–∏—Ö —Å–µ–º–µ–π—Å—Ç–≤, –Ω–µ—Ç.
<br>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/PentagonTilings15.svg/1920px-PentagonTilings15.svg.png" style="width:100%">
`,
  },
  {
    x: 50, y: 43, amount: 8, bonus: 2,
    html: `–§–æ—Ä–º—É–ª—É –¥–ª—è –ø–ª–æ—â–∞–¥–∏ –∫—Ä—É–≥–∞ –º–æ–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∏—Ü—Ü—ã. –ü–∏—Ü—Ü–∞ —Ä–∞–¥–∏—É—Å–æ–º <i>—Ü</i> –∏ —Ç–æ–ª—â–∏–Ω–æ–π <i>–∞</i> –∏–º–µ–µ—Ç –æ–±—ä—ë–º <i>–ø–∏</i>‚àô<i>—Ü</i>‚àô<i>—Ü</i>‚àô<i>–∞</i> = ùúã —Ü¬≤‚àôa`,
  },
  {
    x: 1, y: 50, amount: 10, bonus: 3,
    html: `–ò–∑–≤–µ—Å—Ç–Ω—ã–π –Ω–µ–º–µ—Ü–∫–∏–π –∞–ª–≥–µ–±—Ä–∞–∏—Å—Ç –≠—Ä–Ω—Å—Ç –≠–¥—É–∞—Ä–¥ –ö—É–º–º–µ—Ä (1810‚Äì1893) –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ —É–º–µ–ª —Å—á–∏—Ç–∞—Ç—å –≤ —É–º–µ. –ï—Å–ª–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ª–µ–∫—Ü–∏–∏ –µ–º—É –Ω–∞–¥–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π —Ä–∞—Å—á–µ—Ç, –æ–Ω –æ–±—ã—á–Ω–æ –ø—Ä–∏–±–µ–≥–∞–ª –∫ –ø–æ–º–æ—â–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.
–û–¥–Ω–∞–∂–¥—ã –µ–º—É –Ω–∞–¥–æ –±—ã–ª–æ —É–º–Ω–æ–∂–∏—Ç—å 7 –Ω–∞ 9. –û–Ω –Ω–∞—á–∞–ª –≤—Å–ª—É—Ö —Ä–∞—Å—Å—É–∂–¥–∞—Ç—å:
<br>
‚Äî –ì–º... —ç—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 61, –ø–æ—Ç–æ–º—É —á—Ç–æ 61 ‚Äî –ø—Ä–æ—Å—Ç–æ–µ —á–∏—Å–ª–æ. –≠—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ 65, –ø–æ—Ç–æ–º—É —á—Ç–æ 65 –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 5. 67 ‚Äî —Ç–æ–∂–µ –ø—Ä–æ—Å—Ç–æ–µ —á–∏—Å–ª–æ, –∞ 69 ‚Äî —è–≤–Ω–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ. –û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 63...`,
  },
  {
    x: 14, y: 50, amount: 8, bonus: 2,
    html: `–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –º–∞—Ç–µ–º–∞—Ç–∏–∫ –∏ –ø—Ä–æ—Å–≤–µ—Ç–∏—Ç–µ–ª—å –ñ–∞–Ω –î–∞–ª–∞–º–±–µ—Ä (1717‚Äì1783) –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∏–∑–ª–∞–≥–∞–ª —Å—Ç—É–¥–µ–Ω—Ç–∞–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ç–µ–æ—Ä–µ–º—É, –Ω–µ–∏–∑–º–µ–Ω–Ω–æ –≥–æ–≤–æ—Ä–∏–ª: ¬´–ê —Å–µ–π—á–∞—Å, –≥–æ—Å–ø–æ–¥–∞, –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ç–µ–æ—Ä–µ–º–µ, –∏–º—è –∫–æ—Ç–æ—Ä–æ–π —è –∏–º–µ—é —á–µ—Å—Ç—å –Ω–æ—Å–∏—Ç—å!¬ª`,
  },
  {
    x: 43, y: 50, amount: 8, bonus: 2,
    html: `–ú–Ω–æ–≥–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–∏–∑–∏–∫–∏-—Ç–µ–æ—Ä–µ—Ç–∏–∫–∏ –æ—Ç–ª–∏—á–∞–ª–∏—Å—å –Ω–µ–∑–∞—É—Ä—è–¥–Ω—ã–º–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏. –û–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö –±—ã–ª –Ω–æ–±–µ–ª–µ–≤—Å–∫–∏–π –ª–∞—É—Ä–µ–∞—Ç –ü–æ–ª—å –î–∏—Ä–∞–∫.
–î–∏—Ä–∞–∫, –±—É–¥—É—á–∏ –µ—â–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–º, —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –∫–æ–Ω–∫—É—Ä—Å–µ, –≥–¥–µ –≤ —á–∏—Å–ª–µ –¥—Ä—É–≥–∏—Ö –±—ã–ª–∞ –∏ —Ç–∞–∫–∞—è –∑–∞–¥–∞—á–∞.
<br>
–¢—Ä–∏ —Ä—ã–±–∞–∫–∞ –Ω–∞–ª–æ–≤–∏–ª–∏ —Ä—ã–±—ã –∏ –ª–µ–≥–ª–∏ —Å–ø–∞—Ç—å. –ü–µ—Ä–≤—ã–π –∏–∑ –Ω–∏—Ö –ø—Ä–æ—Å–Ω—É–ª—Å—è —É—Ç—Ä–æ–º –∏ —Ä–µ—à–∏–ª —É–µ—Ö–∞—Ç—å –¥–æ–º–æ–π. –°–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–∏—â–µ–π –æ–Ω –Ω–µ —Å—Ç–∞–ª –±—É–¥–∏—Ç—å, –∞ —Ä–∞–∑–¥–µ–ª–∏–ª –≤—Å—é —Ä—ã–±—É –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º –æ–¥–Ω–∞ —Ä—ã–±–∞ –æ–∫–∞–∑–∞–ª–∞—Å—å –ª–∏—à–Ω–µ–π. –ù–µ–¥–æ–ª–≥–æ –¥—É–º–∞—è, –æ–Ω —à–≤—ã—Ä–Ω—É–ª –µ–µ –≤ –≤–æ–¥—É, –∑–∞–±—Ä–∞–ª —Å–≤–æ—é —á–∞—Å—Ç—å –∏ —É–µ—Ö–∞–ª –¥–æ–º–æ–π. –ü–æ—Ç–æ–º –ø—Ä–æ—Å–Ω—É–ª—Å—è –≤—Ç–æ—Ä–æ–π —Ä—ã–±–∞–∫. –û–Ω –Ω–µ –∑–Ω–∞–ª, —á—Ç–æ –ø–µ—Ä–≤—ã–π —Ä—ã–±–∞–∫ —É–∂–µ —É–µ—Ö–∞–ª, –∏ —Ç–æ–∂–µ –ø–æ–¥–µ–ª–∏–ª –≤—Å—é —Ä—ã–±—É –Ω–∞ —Ç—Ä–∏ —Ä–∞–≤–Ω—ã–µ —á–∞—Å—Ç–∏, –∏, –∫–æ–Ω–µ—á–Ω–æ, –æ–¥–Ω–∞ —Ä—ã–±–∞ –æ–∫–∞–∑–∞–ª–∞—Å—å –ª–∏—à–Ω–µ–π. –û–Ω —Ç–æ–∂–µ –∑–∞–∫–∏–Ω—É–ª –æ–Ω –µ–µ –ø–æ–¥–∞–ª—å—à–µ –æ—Ç –±–µ—Ä–µ–≥–∞ –∏ —Å–æ —Å–≤–æ–µ–π –¥–æ–ª–µ–π —É–¥–∞–ª–∏–ª—Å—è. –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä—ã–±–∞–∫ —Ç–æ–∂–µ –Ω–µ –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –µ–≥–æ —Ç–æ–≤–∞—Ä–∏—â–µ–π —É–∂–µ –Ω–µ—Ç. –†–∞–∑–¥–µ–ª–∏–ª –µ–µ –Ω–∞ —Ç—Ä–∏ —Ä–∞–≤–Ω—ã–µ —á–∞—Å—Ç–∏, –≤—ã–±—Ä–æ—Å–∏–ª –æ–¥–Ω—É –ª–∏—à–Ω—é—é —Ä—ã–±—É –≤ –≤–æ–¥—É, –∑–∞–±—Ä–∞–ª —Å–≤–æ—é –¥–æ–ª—é –∏ –±—ã–ª —Ç–∞–∫–æ–≤.
–í –∑–∞–¥–∞—á–µ —Å–ø—Ä–∞—à–∏–≤–∞–ª–æ—Å—å, –∫–∞–∫–æ–µ –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—ã–± –º–æ–≥–ª–æ –±—ã—Ç—å —É —Ä—ã–±–∞–∫–æ–≤.
<br>
–î–∏—Ä–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–∏–ª —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ: —Ä—ã–± –±—ã–ª–æ (‚Äì2). –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ä—ã–±–∞–∫ —Å–æ–≤–µ—Ä—à–∏–ª –ø–æ—Å—Ç—É–ø–æ–∫, —à–≤—ã—Ä–Ω—É–≤ –æ–¥–Ω—É —Ä—ã–±—É –≤ –≤–æ–¥—É, –∏—Ö —Å—Ç–∞–ª–æ (‚Äì2) ‚Äì 1 = ‚Äì3. –ü–æ—Ç–æ–º –æ–Ω —É—à–µ–ª, —É–Ω–æ—Å—è –ø–æ–¥ –º—ã—à–∫–æ–π (‚Äì1) —Ä—ã–±—É. –†—ã–± —Å—Ç–∞–ª–æ (‚Äì3) ‚Äì (‚Äì1) = ‚Äì2. –í—Ç–æ—Ä–æ–π –∏ —Ç—Ä–µ—Ç–∏–π —Ä—ã–±–∞–∫–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –ø–æ—Å—Ç—É–ø–æ–∫ –∏—Ö —Ç–æ–≤–∞—Ä–∏—â–∞.`,
  },
  {
    x: 50, y: 50, amount: 10, bonus: 5,
    html: `–û–¥–Ω–∞–∂–¥—ã –∫ –≠—Ä–Ω–µ—Å—Ç—É –†–µ–∑–µ—Ä—Ñ–æ—Ä–¥—É –∑–∞ –ø–æ–º–æ—â—å—é –æ–±—Ä–∞—Ç–∏–ª—Å—è –µ–≥–æ –∫–æ–ª–ª–µ–≥–∞ –∏–∑ –ö–æ–ø–µ–Ω–≥–∞–≥–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–ª —ç–∫–∑–∞–º–µ–Ω –ø–æ —Ñ–∏–∑–∏–∫–µ –∏ —Å–æ–±–∏—Ä–∞–ª—Å—è –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç—É –Ω–µ—É–¥, –Ω–æ —Å—Ç—É–¥–µ–Ω—Ç –±—ã–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω –∏ –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –≤—ã—Å—à–∏–π –±–∞–ª–ª.
–í –±–∏–ª–µ—Ç–µ –ø—Ä–æ—Å–∏–ª–∏ –æ–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é –±–∞—Ä–æ–º–µ—Ç—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—ã—Å–æ—Ç—É –∑–¥–∞–Ω–∏—è. 
–û—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –±—ã–ª —Ç–∞–∫–∏–º: "–ù—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å—Å—è —Å –±–∞—Ä–æ–º–µ—Ç—Ä–æ–º –Ω–∞ –∫—Ä—ã—à—É –∑–¥–∞–Ω–∏—è, –ø—Ä–∏–≤—è–∑–∞—Ç—å –µ–≥–æ –∫ –¥–ª–∏–Ω–Ω–æ–π –≤–µ—Ä–µ–≤–∫–µ, —Å–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –ø–æ –≤–µ—Ä–µ–≤–∫–µ –≤–Ω–∏–∑, –ø–æ—Ç–æ–º –≤—Ç—è–Ω—É—Ç—å –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –∏ –∏–∑–º–µ—Ä–∏—Ç—å –¥–ª–∏–Ω—É –≤–µ—Ä–µ–≤–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –≤—ã—Å–æ—Ç—É –∑–¥–∞–Ω–∏—è".
–†–µ–∑–µ—Ä—Ñ–æ—Ä–¥ –æ—Ç–º–µ—Ç–∏–ª, —á—Ç–æ —ç–∫–∑–∞–º–µ–Ω –±—ã–ª –ø–æ —Ñ–∏–∑–∏–∫–µ –∏ —Å–ª–µ–¥–æ–≤–∞–ª–æ –±—ã –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É.
–í –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç –ø—Ä–µ–¥–ª–æ–∂–∏–ª –†–µ–∑–µ—Ä—Ñ–æ—Ä–¥—É –≤ –æ–±—â–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –±–æ–ª—å—à–µ —Ç—Ä–∏–¥—Ü–∞—Ç–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
<br>
‚Äî –õ–∞–¥–Ω–æ, –æ—Ü–µ–Ω–∫–∞ "–æ—Ç–ª–∏—á–Ω–æ". –ù–æ —Å–∫–∞–∂–∏—Ç–µ, –Ω–µ—É–∂–µ–ª–∏ –≤—ã –≤ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ –∑–Ω–∞–ª–∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Ç –≤–∞—Å –∂–¥–∞–ª –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Å —Ä–∞–∑–Ω–∏—Ü–æ–π –¥–∞–≤–ª–µ–Ω–∏–π?
<br>
‚Äî –ó–Ω–∞–ª, –∫–æ–Ω–µ—á–Ω–æ. –ù–æ —è –∑–∞ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è –≤ —à–∫–æ–ª–µ –∏ –∫–æ–ª–ª–µ–¥–∂–µ –ø–æ –≥–æ—Ä–ª–æ –Ω–∞—Å—ã—Ç–∏–ª—Å—è —Ç–µ–º, —á—Ç–æ —É—á–∏—Ç–µ–ª—è –Ω–∞–≤—è–∑—ã–≤–∞—é—Ç —É—á–µ–Ω–∏–∫–∞–º —Å–≤–æ–π —Å–ø–æ—Å–æ–± –º—ã—à–ª–µ–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è.
<br>
–°—Ç—É–¥–µ–Ω—Ç–∞ —ç—Ç–æ–≥–æ –∑–≤–∞–ª–∏ –ù–∏–ª—å—Å –ë–æ—Ä.`,
  },
];


const scene = {
  $game: undefined,
  $header: undefined,
  $gameTable: undefined,
  $modal: undefined,
  $popup: undefined,
  $popupText: undefined,
  $popupButton1: undefined,
  $popupButton2: undefined,
  map: undefined,
  width: undefined,
  height: undefined,
  chests: {},
  opened: [],
  scores: {},
  flags: {},
  myFlag: undefined,
};


function showPopupWide($cell, html, button1, buttonTitle1, buttonOnclick1) {
  const curRem = parseFloat(getComputedStyle(document.documentElement).fontSize);
  scene.$modal.style.top = `${window.scrollY + CELL_SIZE_IN_REM * curRem}px`;
  scene.$modal.style.left = `${scene.$gameTable.offsetLeft + window.scrollX}px`;
  scene.$modal.style.width = `${Math.min(window.innerWidth, 1000)}px`;
  scene.$modal.style.height = `calc(100% - ${CELL_SIZE_IN_REM}rem)`;
  // –ü–æ–ª–Ω—ã–π —Ç—Ä–µ—à –∑–¥–µ—Å—å!
  scene.$modal.style.transform = 'none';
  scene.$modal.style.margin = 'auto';
  scene.$popupText.innerHTML = html;
  scene.$popupButton1.innerText = button1;
  scene.$popupButton1.title = buttonTitle1;
  scene.$popupButton1.onclick = buttonOnclick1;
  scene.$popupButton1.focus();
  scene.$popup.style.display = "block";
  scene.$popup.style.textAlign = "left";
  scene.$popupButton2.style.display = "none";
}


function showPopup($cell, html, button1, buttonTitle1, buttonOnclick1, button2 = undefined, buttonTitle2 = undefined, buttonOnclick2 = undefined) {
  const curRem = parseFloat(getComputedStyle(document.documentElement).fontSize);
  const x = $cell.offsetLeft + $cell.offsetWidth / 2 - document.body.scrollLeft;
  const y = $cell.offsetTop + $cell.offsetHeight / 2 - document.body.scrollTop;
  const halfModalWidth = CELL_SIZE_IN_REM * MODAL_WIDTH_IN_CELLS * curRem / 2;
  const halfModalHeight = CELL_SIZE_IN_REM * MODAL_HEIGHT_IN_CELLS * curRem / 2;
  let useTop = y - halfModalHeight - CELL_SIZE_IN_REM * curRem / 2;
  if (useTop < halfModalHeight) {
    useTop = y + halfModalHeight + CELL_SIZE_IN_REM * curRem / 2;
  }
  useTop += CELL_SIZE_IN_REM * curRem;

  // –ü–æ–ª–Ω—ã–π —Ç—Ä–µ—à –∑–¥–µ—Å—å!
  scene.$modal.style.top = `${useTop}px`;
  scene.$modal.style.left = `${Math.min(Math.max(x, halfModalWidth), window.scrollX + window.innerWidth - halfModalWidth)}px`;
  scene.$modal.style.width = `${CELL_SIZE_IN_REM * MODAL_WIDTH_IN_CELLS}rem`;
  scene.$modal.style.height = `${CELL_SIZE_IN_REM * MODAL_HEIGHT_IN_CELLS}rem`;
  scene.$modal.style.transform = 'translate(-50%, -50%)';
  scene.$modal.style.margin = '0';
  scene.$popup.style.textAlign = "center";

  scene.$popupText.innerHTML = html;
  scene.$popupButton1.innerText = button1;
  scene.$popupButton1.title = buttonTitle1;
  scene.$popupButton1.onclick = buttonOnclick1;
  scene.$popupButton1.focus();
  if (button2 === undefined) {
    scene.$popupButton2.style.display = "none";
  } else {
    scene.$popupButton2.style.display = "inline-block";
    scene.$popupButton2.innerText = button2;
    scene.$popupButton2.onclick = buttonOnclick2;
    scene.$popupButton2.title = buttonTitle2;
  }
  scene.$popup.style.display = "block";
}

function hidePopup() {
  const popup = document.getElementById("popup");
  popup.style.display = "none";
}


function convertMap(mapAsString) {
  const map = mapAsString
    .trim()
    .split('\n')
    .map((row) => row.trim().split('\t').map((cell) => parseInt(cell) || cell));
  const width = map[0].length;
  const height = map.length;
  const chests = {};
  for (const chest of chestsAsObj) {
    const {x, y, amount, html, bonus} = chest;
    const cellId = y * width + x;
    chests[cellId] = {amount, html, bonus, isOpened: false};
  }
  return {map, width, height, chests, opened: [], scores: [], flags: {}};
}

async function postData(url = '', data = {}) {
  const response = await fetch(url, {
    method: 'POST', // *GET, POST, PUT, DELETE, etc.
    mode: 'cors', // no-cors, *cors, same-origin
    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
    credentials: 'same-origin', // include, *same-origin, omit
    headers: {'Content-Type': 'application/json'},
    redirect: 'follow', // manual, *follow, error
    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
    body: JSON.stringify(data), // body data type must match "Content-Type" header
  });
  return response.json(); // parses JSON response into native JavaScript objects
}


function succesBuy($cell) {
  $cell.className = 'so';
  scene.opened.push($cell.cellID);
  updateMap();
  renderHeader();
}

function postBuy($cell, amount) {
  postData('/game/buy', {x: $cell.coln, y: $cell.rown, amount})
    .then(resp => () => succesBuy($cell))
    .catch(err => {
      console.log(err);
      updateMap();
      renderHeader();
      $cell.style.border = '3px solid #f00';
    });
}

function postFlag($cell) {
  postData('/game/flag', {x: $cell.coln, y: $cell.rown})
    .then(resp => {
      // console.log(resp);
    });
}

function postOpenChest($cell) {
  postData('/game/chest', {x: $cell.coln, y: $cell.rown, bonus: $cell.chest.bonus})
    .then(resp => {
      // console.log(resp);
    })
    .catch(err => {
      console.log(err);
      updateMap();
      renderHeader();
      $cell.style.border = '3px solid #f00';
    });
}

function refreshData(response) {
  scene.opened.push(...response['opened'].map(([x, y]) => y * scene.width + x));
  scene.scores = {};
  for (const diff of response['events']) {
    if (diff > 0) {
      scene.scores[diff] = (scene.scores[diff] | 0) + 1;
    } else {
      buy(-diff);
    }
  }
  scene.flags = {};
  response['flags'].forEach(([x, y]) => {
    const cellId = y * scene.width + x;
    scene.flags[cellId] = (scene.flags[cellId] | 0) + 1;
  });
  response['chests'].forEach(([x, y]) => {
    if (x < 0 || y < 0) return;
    try {
      scene.$cells[y][x].chest.isOpened = true;
    } catch (e) {
      console.log(e);
    }
  });
  scene.myFlag = response['myFlag'] && response['myFlag'].length === 2 && response['myFlag'].y * scene.width + response['myFlag'].x;
}

async function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}



const colors = ['#ff0044', '#68386c', '#b55088', '#f6757a', '#c0cbdc', '#8b9bb4', '#5a6988', '#3a4466', '#262b44', '#193c3e', '#124e89', '#0099db', '#2ce8f5', '#feae34', '#fee761', '#63c74d', '#3e8948', '#265c42', '#ead4aa', '#e4a672', '#b86f50', '#f77622', '#733e39', '#be4a2f', '#d77643', '#a22633', '#e43b44'];
// const commands = [10004, 114, 10014, 106, 111, 10012, 108, 10002, 107, 110, 10003, 115, 10018, 10009, 103, 10000, 113, 10010, 10017, 109, 10013, 105, 102, 10008, 10016, 112, 10006, 101, 10007, 10011, 116, 104, 10005, 10001, 10015, 118];
const commands = [101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 118, 10000, 10001, 10002, 10003, 10004, 10005, 10006, 10007, 10008, 10009, 10010, 10011, 10012, 10013, 10014, 10015, 10016, 10017, 10018]
async function runAll() {
  let tlCommandId = commands.shift();
    console.log('–∫–æ–º–∞–Ω–¥–∞')
    await postData(`/game/timeline/${tlCommandId}`, {})
      .then(resp => {
        runTLAnimation(resp, tlCommandId);
      });
}



async function runTLAnimation(response, tlCommandId) {
  // –ü–∞—Ä—Å–∏–º timestamp'—ã
  Object.assign(scene, convertMap(mapAsString));
  for (const $row of scene.$cells) {
    for (const $cell of $row) {
      $cell.style.background = null;
      $cell.style.color = null;
    }
  }
  updateMap();
  const studentColors = {};
  let lastUsedColor = 0;
  response.forEach(obj => obj.tss = new Date(obj.ts).getTime());
  scene.$header.innerHTML = `<div>–ö–æ–º–∞–Ω–¥–∞ ${tlCommandId}</div>`;
  let timeOut = new URL(window.location).searchParams.get('ms');
  let realtime = false;
  let timePeriod;
  const destAnimationDurMs = (new URL(window.location).searchParams.get('dur'))*1000 || 20000;
  if (timeOut === undefined || timeOut === null) {
    timeOut = Math.max(4, 1000 / response.length);
  } else if (timeOut === '0') {
    realtime = true;
    timePeriod = response[response.length - 1].tss - response[0].tss;
  }
  let prevSleepStart = response[0].tss;
  for (let i = 0; i < response.length; i++) {
    const student_id = response[i].student_id;
    if (studentColors[student_id] === undefined) {
      studentColors[student_id] = colors[lastUsedColor];
      lastUsedColor += 1;
    }
    const useColor = studentColors[student_id];

    let timeToSleep = 0;
    if (!realtime) {
      timeToSleep = +timeOut;
    } else {
      const delta = (response[i].tss - prevSleepStart) / timePeriod * destAnimationDurMs;
      if (delta > 4) {
        timeToSleep = delta;
        prevSleepStart = response[i].tss;
      }
    }
    const coln = response[i]['x'];
    const rown = response[i]['y'];
    const cellID = rown * scene.width + coln;
    scene.opened.push(cellID);
    scene.$cells[rown][coln].style.background = useColor;
    scene.$cells[rown][coln].style.color = useColor;
    if (timeToSleep >= 1) {
      await sleep(timeToSleep);
      updateMap();
    }
  }
  updateMap();
  scene.$header.innerHTML = `<div>–ó–∞–≤–µ—Ä—à–µ–Ω–æ. –ö–æ–º–∞–Ω–¥–∞ ${tlCommandId}</div>`;
  // await sleep(300);
  // alert(tlCommandId);
  await sleep(3000);
  await runAll();
}

function fetchInitialData() {
  scene.$header.innerHTML = `<div><p><span>...‚ö°</span> ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é...</p></div>`;
  const tlCommandId = parseInt(new URL(window.location).searchParams.get('command_id'));

  if (! (tlCommandId > 0)) {
    postData('/game/me', {})
      .then(resp => {
        refreshData(resp);
        updateMap();
        renderHeader();
      });
  } else {
    postData(`/game/timeline/${tlCommandId}`, {})
      .then(resp => {
        runTLAnimation(resp);
      });
  }
}


function yesClicked($cell, amount) {
  $cell.textContent = "...";
  $cell.onclick = null;
  const successBuy = buy(amount);
  renderHeader();
  hidePopup();
  console.log(`–ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å —è—á–µ–π–∫—É ${$cell.coln} ${$cell.rown} –∑–∞ ${amount}`);
  if (successBuy && !DEBUG) {
    postBuy($cell, amount);
  } else if (successBuy && DEBUG) {
    succesBuy($cell);
  }
}

function flagYesClicked($cell) {
  if (scene.myFlag) {
    scene.flags[scene.myFlag] = Math.max(0, (scene.flags[scene.myFlag] | 0) - 1);
  }
  scene.myFlag = $cell.cellID;
  scene.flags[scene.myFlag] = (scene.flags[scene.myFlag] | 0) + 1;
  updateMap();
  hidePopup();
  if (!DEBUG) {
    postFlag($cell);
  }
}

function noClicked($cell) {
  $cell.classList.remove('selected');
  hidePopup();
}

function okClicked($cell) {
  $cell.classList.remove('selected');
  hidePopup();
}


function onCellClick(ev) {
  const $cell = ev.target;

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ä—è–¥–æ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–µ—Ç–∫–∏
  const {rown, coln} = $cell;
  const upOpened = rown - 1 >= 0 && scene.$cells[rown - 1][coln].textContent === "o";
  const downOpened = rown + 1 < scene.height && scene.$cells[rown + 1][coln].textContent === "o";
  const leftOpened = coln - 1 >= 0 && scene.$cells[rown][coln - 1].textContent === "o";
  const rightOpened = coln + 1 < scene.width && scene.$cells[rown][coln + 1].textContent === "o";

  if (upOpened || downOpened || leftOpened || rightOpened) {
    $cell.classList.add('selected');
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ –¥–µ–Ω–µ–≥ –∫—É–ø–∏—Ç—å
    const amount = +$cell.textContent;
    const whichToMinus = tryToBuy(amount);
    if (whichToMinus === undefined) {
      showPopup($cell, `–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç ‚ö°<br>–†–µ—à–∏—Ç–µ –∑–∞–¥–∞—á–∫—É!`, '–ë—É–¥—É —Ä–µ—à–∞—Ç—å!', '–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ', () => okClicked($cell));
    } else {
      showPopup($cell, `–ò–∑—É—á–∏—Ç—å –∫–ª–µ—Ç–∫—É<br>–∑–∞ ${$cell.textContent}‚ö°?`, '‚úÖ –î–∞!', '–î–∞, –∏–∑—É—á–∏—Ç—å –∫–ª–µ—Ç–∫—É!', () => yesClicked($cell, amount), '‚ùå –ù–µ—Ç', '–ù–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥', () => noClicked($cell));
    }
  } else {
    $cell.classList.add('selected');
    // showPopup(centerX, centerY, `–ú–æ–∂–Ω–æ –∏–∑—É—á–∞—Ç—å<br>—Ç–æ–ª—å–∫–æ —Å–æ—Å–µ–¥–Ω–∏–µ`, '–Ø—Å–Ω–æ', '–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ', () => okClicked($cell));
    showPopup($cell, `–ü–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ <br>–¥–ª—è –≤—Å–µ—Ö –≤ —è—á–µ–π–∫—É?`, 'üö© –î–∞!', '–î–∞, –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–ª–∞–≥!', () => flagYesClicked($cell), '–ù–µ—Ç', '–ù–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥', () => noClicked($cell));
  }
}

function renderHeader() {
  scene.$header.innerHTML = Object.entries(scene.scores).map(([key, value]) => value > 0 ? `<div><p><span>${key}‚ö°</span> √ó ${value} </p></div>` : '').join('');
  if (scene.$header.innerHTML.length === 0) {
    scene.$header.innerHTML = `<div><p><span>0‚ö°</span> ‚Äî —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é, –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É </p></div>`;
  }
}

function tryToBuy(amount) {
  for (const [key, value] of Object.entries(scene.scores)) {
    if (value > 0 && key >= amount) {
      return key;
    }
  }
}


function showChestSecret(ev) {
  const $cell = ev.target;
  showPopupWide($cell, $cell.chest.html, '–ö—Ä—É—Ç–æ!', '–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ', () => okClicked($cell));
}

function onClosedChestClick(ev) {
  const $cell = ev.target;
  $cell.chest.isOpened = true;
  $cell.className = 'openedChest';
  $cell.onclick = $cell.ondblclick = showChestSecret;
  scene.scores[$cell.chest.bonus] = (scene.scores[$cell.chest.bonus] | 0) + 1;
  postOpenChest($cell);
  showChestSecret(ev);
}


function buy(amount) {
  for (const [whichToMinus, value] of Object.entries(scene.scores)) {
    if (value > 0 && whichToMinus >= amount) {
      scene.scores[whichToMinus] -= 1;
      const diff = whichToMinus - amount;
      if (diff > 0) {
        scene.scores[diff] = (scene.scores[diff] | 0) + 1; // –•–∞–∫ –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–ª—é—á–∞
      }
      return true;
    }
  }
  return false;
}

function updateMap() {
  // –°–Ω–∞—á–∞–ª–∞ –æ—Ç–º–µ—á–∞–µ–º –æ—Ç–∫—Ä—ã—Ç—ã–µ —è—á–µ–π–∫–∏
  for (const cellID of scene.opened) {
    const rown = Math.trunc(cellID / scene.width);
    const coln = cellID % scene.width;
    if (scene.map[rown][coln] !== "x") {
      scene.map[rown][coln] = "o";
    }
  }
  // –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–±—Ö–æ–¥ –≤ —à–∏—Ä–∏–Ω—É –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å ¬´—Ç—É–º–∞–Ω –≤–æ–π–Ω—ã¬ª
  const distances = new Map();
  let curLayer = new Set();
  for (let rown = 0; rown < scene.map.length; rown += 1) {
    for (let coln = 0; coln < scene.map[0].length; coln += 1) {
      if (scene.map[rown][coln] === "o") {
        const cellID = rown * scene.width + coln;
        distances.set(cellID, 0);
        curLayer.add(cellID);
      }
    }
  }
  let steps = 0;
  while (curLayer.size > 0 && steps < FOG_OF_WAR) {
    let nextLayer = new Set();
    for (const cellID of curLayer) {
      const rown = Math.trunc(cellID / scene.width);
      const coln = cellID % scene.width;
      if (scene.map[rown][coln] === "x") {
        continue;
      }
      if (rown === 0 || coln === 0 || coln === scene.width - 1 || rown === scene.height - 1) {
        continue;
      } // –†–∞–º–∫—É –Ω–µ —Ç—Ä–æ–≥–∞–µ–º
      for (const diff of [-1, 1, -scene.width - 1, -scene.width, -scene.width + 1, +scene.width - 1, +scene.width, +scene.width + 1]) {
        const newcellID = cellID + diff;
        if (distances.get(newcellID) === undefined) {
          distances.set(newcellID, distances.get(cellID) + 1);
          nextLayer.add(newcellID);
        }
      }
    }
    curLayer = nextLayer;
    steps += 1;
  }


  // –¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏
  for (let rown = 0; rown < scene.map.length; rown += 1) {
    const valuesRow = scene.map[rown];
    for (let coln = 0; coln < valuesRow.length; coln += 1) {
      const cellValue = valuesRow[coln];
      const $cell = scene.$cells[rown][coln];
      const dist = distances.get($cell.cellID);
      const isBorder = rown === 0 || coln === 0 || coln === scene.width - 1 || rown === scene.height - 1;
      if (dist < FOG_OF_WAR || isBorder) {
        $cell.textContent = cellValue;
        if (cellValue !== 'o') {
          $cell.className = `s${cellValue}`;
        }
        if (+cellValue) {
          $cell.onclick = $cell.ondblclick = onCellClick;
        } else {
          $cell.onclick = $cell.ondblclick = null;
        }
        if (!isBorder && FOG_OF_WAR - dist <= FOR_OPACITY_LEN) {
          $cell.style.opacity = (FOG_OF_WAR - dist) / FOR_OPACITY_LEN;
        } else {
          $cell.style.opacity = 1;
        }
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—É–Ω–¥—É–∫–∏
        if ($cell.chest) {
          if ($cell.chest.isOpened) {
            $cell.classList.add('openedChest');
            $cell.onclick = $cell.ondblclick = showChestSecret;
          } else {
            $cell.classList.add('closedChest');
            if (!+cellValue) {
              $cell.onclick = $cell.ondblclick = onClosedChestClick;
            }
          }
          $cell.style.opacity = 1;
        }
      } else {
        $cell.textContent = '';
        $cell.className = 'fog';
        $cell.onclick = $cell.ondblclick = null;
      }
      // –î–æ–±–∞–≤–ª—è–µ–º –≤ —è—á–µ–π–∫—É —Ñ–ª–∞–≥–∏
      const addFlagsHtmls = [];
      for (let flRep = 0; flRep < (scene.flags[$cell.cellID] | 0); flRep++) {
        const rx = ((flRep * 0.71) % 1.5).toFixed(2);
        const ry = (-0.6 - (flRep * 0.61) % 1.8).toFixed(2); // –æ—Ç -2.4 –¥–æ -0.6
        addFlagsHtmls.push(`<div class="flag" style="top: ${ry}rem; left: ${rx}rem; "></div>`);
      }
      $cell.innerHTML = $cell.textContent + addFlagsHtmls.join('');
    }
  }
  // –ó–∞–≥–æ–ª–æ–≤–æ–∫
  // renderHeader();
}


function initialMapRender() {
  scene.$cells = [];
  for (let rown = 0; rown < scene.map.length; rown += 1) {
    const valuesRow = scene.map[rown];
    const $tableRow = scene.$gameTable.insertRow();
    const $cellsRow = [];
    scene.$cells.push($cellsRow);
    for (let coln = 0; coln < valuesRow.length; coln += 1) {
      const cellValue = valuesRow[coln];
      if (DEBUG && cellValue >= 8) {
        console.log({x: coln, y: rown, amount: cellValue, html: "", bonus: 2});
      }
      const $cell = $tableRow.insertCell();
      $cellsRow.push($cell);
      $cell.coln = coln;
      $cell.rown = rown;
      $cell.cellID = rown * scene.width + coln;
      $cell.chest = scene.chests[$cell.cellID];
      $cell.id = `${coln}_${rown}`;
    }
  }
}

function prepareWebsockets() {
  scene.curWebSocket = null;
  scene.wsConnectInterval = null;

  function onWebSocketOpen(ev) {
    // console.log('Websocket open', ev);
  }

  function onWebSocketMessage(ev) {
    // console.log('Message', ev);
    const resp = JSON.parse(ev.data);
    refreshData(resp);
    updateMap();
    renderHeader();
  }

  function onWebSocketClose(ev) {
    if (ev.wasClean) {
      // console.log('Clean connection end')
    } else {
      // console.log('Connection broken')
    }
    scene.curWebSocket = null;
    scene.wsConnectInterval = setInterval(() => {
      scene.curWebSocket = createWebSocketConnection();
    }, 2000);
  }

  function createWebSocketConnection() {
    let ws;
    if (window.location.host.startsWith('127.0.0.1')) {
      ws = new WebSocket('ws://' + window.location.host + '/game/ws');
    } else {
      ws = new WebSocket('wss://' + window.location.host + '/game/ws');
    }
    ws.onopen = onWebSocketOpen;
    ws.onmessage = onWebSocketMessage;
    ws.onclose = onWebSocketClose;
    if (scene.wsConnectInterval) {
      clearInterval(scene.wsConnectInterval);
      scene.wsConnectInterval = null;
    }
    return ws;
  }

  scene.wsConnectInterval = setInterval(() => {
    scene.curWebSocket = createWebSocketConnection();
  }, 2000);
  scene.curWebSocket = createWebSocketConnection();
}

function onScroll(ev) {
  localStorage.setItem('x', document.body.scrollLeft);
  localStorage.setItem('y', document.body.scrollTop);
}

function resumeScrol() {
  document.body.scrollLeft = +localStorage.getItem('x');
  document.body.scrollTop = +localStorage.getItem('y');
}

function init() {
  scene.$game = document.getElementById('game');
  scene.$header = document.getElementById('header');
  scene.$gameTable = document.getElementById('gameTable');
  scene.$modal = document.getElementById("modal-content");
  scene.$popup = document.getElementById("popup");
  scene.$popupText = document.getElementById("popupText");
  scene.$popupButton1 = document.getElementById("popupButton1");
  scene.$popupButton2 = document.getElementById("popupButton2");
  scene.$header = document.getElementById("header");
  Object.assign(scene, convertMap(mapAsString));

  initialMapRender();
  resumeScrol();
  document.body.addEventListener("scroll", onScroll);


  updateMap();
  // runAll();
  setTimeout(runAll, 3000);
  // if (!DEBUG) {
  //   fetchInitialData();
  // } else {
  //   const response = {
  //     opened: [],
  //     events: [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
  //     flags: [],
  //     myFlag: null,
  //     chests: [],
  //   };
  //   refreshData(response);
  //   updateMap();
  //   renderHeader();
  // }
  // prepareWebsockets();
  // setInterval(() => fetchInitialData(), 60 * 1000);
}


function toggleFullscreen() {
  if (document.fullscreenElement) {
    document.exitFullscreen();
  } else {
    document.documentElement.requestFullscreen();
  }
}

window.addEventListener('load', init);


// http://127.0.0.1:8080/game?ms=0&dur=2
